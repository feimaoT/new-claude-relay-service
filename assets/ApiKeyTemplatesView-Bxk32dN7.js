import{r as m,c as le,_ as Te,o as Ee,q as he,I as ge,y as l,z as e,R as q,P as g,Y as ie,x as i,L as k,O as f,K as p,aq as C,C as Ce,Q as K,ac as G,aa as me,al as U,an as we,aV as Ae,a5 as Ne}from"./vue-vendor-DV7DYXbz.js";import{Z as Oe,$ as Se,s as w,v as Le,w as De,x as Ie,y as $e,z as Me,A as Ve,B as Re,C as Ue,D as Ke,a0 as Pe,a1 as je,a2 as qe}from"./index-BRxAk06h.js";import{u as We,a as ze,A as J,N as Fe}from"./NewApiKeyModal-DY5aofSW.js";import{C as Be}from"./ConfirmModal-C5dOSIQU.js";import"./element-plus-BSjV1f9S.js";import"./vendor-Dr8jvgFu.js";const Qe={class:"modal fixed inset-0 z-50 flex items-center justify-center p-3 sm:p-4"},Ye={class:"modal-content mx-auto flex max-h-[90vh] w-full max-w-4xl flex-col p-4 sm:p-6"},He={class:"mb-4 flex items-center justify-between"},Ze={class:"flex items-center gap-2 sm:gap-3"},Je={class:"text-lg font-bold text-gray-900 dark:text-gray-100 sm:text-xl"},Xe={key:0,class:"mt-1 text-xs text-red-500 dark:text-red-400"},_e={class:"space-y-4"},et={key:0},tt={class:"flex flex-wrap gap-2"},st=["onClick"],at={key:1},rt={class:"flex flex-wrap gap-2"},ot=["onClick"],lt={class:"flex gap-2"},it=["onKeypress"],nt={class:"rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-700 dark:bg-blue-900/20"},dt={class:"space-y-2"},ut={class:"grid grid-cols-1 gap-2 lg:grid-cols-3"},pt={class:"space-y-2"},ct={class:"flex gap-2"},gt={class:"space-y-2"},mt={class:"flex gap-2"},yt={class:"space-y-2"},xt={class:"flex gap-2"},bt={class:"rounded-lg border border-purple-200 bg-gradient-to-r from-purple-50 to-indigo-50 p-3 dark:border-purple-700 dark:from-purple-900/20 dark:to-indigo-900/20 sm:p-4"},ft={class:"flex items-center justify-between"},kt={class:"flex items-center gap-2"},vt={key:0,class:"mt-3 space-y-2"},Ct={class:"w-20 text-xs text-gray-600 dark:text-gray-400"},wt=["onUpdate:modelValue"],At={class:"mb-3 rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-gray-700 dark:bg-gray-800"},ht={class:"flex items-center gap-4"},Lt={class:"flex cursor-pointer items-center"},Dt={class:"flex cursor-pointer items-center"},It={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},$t={key:0},Mt={key:1},Vt={key:0},Rt={key:0,class:"mt-3"},Ut=["min"],Kt={key:1,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},Gt={key:1},Tt={class:"flex items-center gap-2"},Et=["max","placeholder"],Nt={class:"mt-2 flex flex-wrap gap-2"},Ot=["onClick"],St={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},Pt={class:"flex flex-wrap gap-4"},jt={class:"flex cursor-pointer items-center"},qt={class:"flex cursor-pointer items-center"},Wt={class:"flex cursor-pointer items-center"},zt={class:"flex cursor-pointer items-center"},Ft={class:"mb-2 flex items-center justify-between"},Bt=["disabled"],Qt={class:"grid grid-cols-1 gap-3"},Yt={class:"mb-2 flex items-center"},Ht={key:0,class:"space-y-3"},Zt={class:"mb-3 flex min-h-[32px] flex-wrap gap-2 rounded-lg border border-gray-200 bg-gray-50 p-2"},Jt=["onClick"],Xt={key:0,class:"text-sm text-gray-400"},_t={class:"space-y-3"},es={class:"flex flex-wrap gap-2"},ts=["onClick"],ss={key:0,class:"text-sm italic text-gray-400"},as={class:"flex gap-2"},rs=["onKeydown"],os={class:"mb-2 flex items-center"},ls={key:0,class:"rounded-lg border border-green-200 bg-green-50 p-3 dark:border-green-700 dark:bg-green-900/20"},is={class:"space-y-1"},ns=["id","value"],ds=["for"],us={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},ps={class:"block text-xs text-gray-500 dark:text-gray-400"},cs={class:"flex gap-3 pt-2"},gs=["disabled"],ms={key:0,class:"loading-spinner mr-2"},ys={key:1,class:"fas fa-save mr-2"},xs={__name:"CreateTemplateModal",props:{accounts:{type:Object,default:()=>({claude:[],gemini:[],openai:[],bedrock:[],droid:[],claudeGroups:[],geminiGroups:[],openaiGroups:[],droidGroups:[]})},template:{type:Object,default:null}},emits:["close","success"],setup(ye,{emit:P}){const b=ye,T=P,E=We(),W=ze(),L=m(!1),D=m(!1),v=le(()=>!!b.template),N=m(!1),I=m({title:"",message:"",type:"primary",confirmText:"ç¡®è®¤",cancelText:"å–æ¶ˆ"}),$=m(null),z=(r,t,a="ç¡®è®¤",x="å–æ¶ˆ",A="primary")=>new Promise(M=>{I.value={title:r,message:t,confirmText:a,cancelText:x,type:A},$.value=M,N.value=!0}),ne=()=>{var r;N.value=!1,(r=$.value)==null||r.call($,!0)},de=()=>{var r;N.value=!1,(r=$.value)==null||r.call($,!1)},y=m({claude:[],gemini:[],openai:[],bedrock:[],droid:[],claudeGroups:[],geminiGroups:[],openaiGroups:[],droidGroups:[]}),V=m({templateName:""}),R=m(""),X=m([]),F=le(()=>X.value.filter(r=>!s.tags.includes(r))),_=m([]),n=m(!1),o=[{key:"claude",label:"Claude"},{key:"gemini",label:"Gemini"},{key:"codex",label:"Codex"},{key:"droid",label:"Droid"},{key:"bedrock",label:"Bedrock"},{key:"azure",label:"Azure"},{key:"ccr",label:"CCR"}],s=Te({templateName:"",description:"",serviceRates:{},rateLimitWindow:"",rateLimitRequests:"",rateLimitCost:"",concurrencyLimit:"",dailyCostLimit:"",totalCostLimit:"",weeklyOpusCostLimit:"",expireDuration:"",customExpireDate:"",expiresAt:null,expirationMode:"fixed",activationDays:30,activationUnit:"days",permissions:[],claudeAccountId:"",geminiAccountId:"",openaiAccountId:"",bedrockAccountId:"",droidAccountId:"",enableModelRestriction:!1,restrictedModels:[],modelInput:"",enableClientRestriction:!1,allowedClients:[],tags:[]}),d=()=>{};Ee(()=>b.template,r=>{r&&(s.templateName=r.templateName||"",s.description=r.description||"",s.serviceRates=r.serviceRates||{},s.rateLimitWindow=r.rateLimitWindow||"",s.rateLimitRequests=r.rateLimitRequests||"",s.rateLimitCost=r.rateLimitCost||"",s.concurrencyLimit=r.concurrencyLimit||"",s.dailyCostLimit=r.dailyCostLimit||"",s.totalCostLimit=r.totalCostLimit||"",s.weeklyOpusCostLimit=r.weeklyOpusCostLimit||"",s.expireDuration=r.expireDuration||"",s.customExpireDate=r.customExpireDate||"",s.expiresAt=r.expiresAt||null,s.expirationMode=r.expirationMode||"fixed",s.activationDays=r.activationDays||30,s.activationUnit=r.activationUnit||"days",s.permissions=Array.isArray(r.permissions)?r.permissions:[],s.claudeAccountId=r.claudeAccountId||"",s.geminiAccountId=r.geminiAccountId||"",s.openaiAccountId=r.openaiAccountId||"",s.bedrockAccountId=r.bedrockAccountId||"",s.droidAccountId=r.droidAccountId||"",s.enableModelRestriction=r.enableModelRestriction||!1,s.restrictedModels=Array.isArray(r.restrictedModels)?r.restrictedModels:[],s.modelInput="",s.enableClientRestriction=r.enableClientRestriction||!1,s.allowedClients=Array.isArray(r.allowedClients)?r.allowedClients:[],s.tags=Array.isArray(r.tags)?r.tags:[],r.serviceRates&&Object.keys(r.serviceRates).length>0?n.value=!0:n.value=!1)},{immediate:!0}),he(async()=>{if(_.value=await E.loadSupportedClients(),X.value=await W.fetchTags(),b.accounts){const r=(b.accounts.gemini||[]).map(a=>({...a,platform:a.platform||"gemini"})),t=[];b.accounts.openai&&b.accounts.openai.forEach(a=>{t.push({...a,platform:a.platform||"openai"})}),b.accounts.openaiResponses&&b.accounts.openaiResponses.forEach(a=>{t.push({...a,platform:a.platform||"openai-responses"})}),y.value={claude:b.accounts.claude||[],gemini:r,openai:t,bedrock:b.accounts.bedrock||[],droid:(b.accounts.droid||[]).map(a=>({...a,platform:a.platform||"droid"})),claudeGroups:b.accounts.claudeGroups||[],geminiGroups:b.accounts.geminiGroups||[],openaiGroups:b.accounts.openaiGroups||[],droidGroups:b.accounts.droidGroups||[]}}});const O=async()=>{var r,t;D.value=!0;try{const[a,x,A,M,xe,be,fe,ke,ve]=await Promise.all([Le(),De(),Ie(),$e(),Me(),Ve(),Re(),Ue(),Ke()]),ue=[];a.success&&((r=a.data)==null||r.forEach(u=>{ue.push({...u,platform:"claude-oauth",isDedicated:u.accountType==="dedicated"})})),x.success&&((t=x.data)==null||t.forEach(u=>{ue.push({...u,platform:"claude-console",isDedicated:u.accountType==="dedicated"})})),y.value.claude=ue;const pe=[];A.success&&(A.data||[]).forEach(u=>{pe.push({...u,platform:"gemini",isDedicated:u.accountType==="dedicated"})}),M.success&&(M.data||[]).forEach(u=>{pe.push({...u,platform:"gemini-api",isDedicated:u.accountType==="dedicated"})}),y.value.gemini=pe;const ce=[];if(xe.success&&(xe.data||[]).forEach(u=>{ce.push({...u,platform:"openai",isDedicated:u.accountType==="dedicated"})}),be.success&&(be.data||[]).forEach(u=>{ce.push({...u,platform:"openai-responses",isDedicated:u.accountType==="dedicated"})}),y.value.openai=ce,fe.success&&(y.value.bedrock=(fe.data||[]).map(u=>({...u,isDedicated:u.accountType==="dedicated"}))),ke.success&&(y.value.droid=(ke.data||[]).map(u=>({...u,platform:"droid",isDedicated:u.accountType==="dedicated"}))),ve.success){const u=ve.data||[];y.value.claudeGroups=u.filter(S=>S.platform==="claude"),y.value.geminiGroups=u.filter(S=>S.platform==="gemini"),y.value.openaiGroups=u.filter(S=>S.platform==="openai"),y.value.droidGroups=u.filter(S=>S.platform==="droid")}w("è´¦å·åˆ—è¡¨å·²åˆ·æ–°","success")}catch{w("åˆ·æ–°è´¦å·åˆ—è¡¨å¤±è´¥","error")}finally{D.value=!1}},ee=le(()=>{const r=new Date;return r.setMinutes(r.getMinutes()+1),r.toISOString().slice(0,16)}),j=()=>{if(!s.expireDuration){s.expiresAt=null;return}if(s.expireDuration==="custom")return;const r=new Date,a=s.expireDuration.match(/(\d+)([dhmy])/);if(a){const[,x,A]=a,M=parseInt(x);switch(A){case"d":r.setDate(r.getDate()+M);break;case"h":r.setHours(r.getHours()+M);break;case"m":r.setMonth(r.getMonth()+M);break;case"y":r.setFullYear(r.getFullYear()+M);break}s.expiresAt=r.toISOString()}},te=()=>{s.customExpireDate&&(s.expiresAt=new Date(s.customExpireDate).toISOString())},se=r=>new Date(r).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),B=()=>{s.modelInput&&!s.restrictedModels.includes(s.modelInput)&&(s.restrictedModels.push(s.modelInput),s.modelInput="")},ae=r=>{s.restrictedModels.splice(r,1)},re=m(["claude-opus-4-20250514","claude-opus-4-1-20250805"]),Q=le(()=>re.value.filter(r=>!s.restrictedModels.includes(r))),oe=r=>{s.restrictedModels.includes(r)||s.restrictedModels.push(r)},h=()=>{if(R.value&&R.value.trim()){const r=R.value.trim();s.tags.includes(r)||s.tags.push(r),R.value=""}},Y=r=>{s.tags.includes(r)||s.tags.push(r)},H=r=>{s.tags.splice(r,1)},Z=()=>s.activationUnit==="hours"?[{value:1,label:"1å°æ—¶"},{value:3,label:"3å°æ—¶"},{value:6,label:"6å°æ—¶"},{value:12,label:"12å°æ—¶"}]:[{value:30,label:"30å¤©"},{value:90,label:"90å¤©"},{value:180,label:"180å¤©"},{value:365,label:"365å¤©"}],c=()=>{s.activationUnit==="hours"?s.activationDays>24&&(s.activationDays=24):s.activationDays<1&&(s.activationDays=1)},Ge=async()=>{if(V.value.templateName="",!s.templateName||!s.templateName.trim()){V.value.templateName="è¯·è¾“å…¥æ¨¡æ¿åç§°";return}if(!(s.rateLimitWindow&&(!s.rateLimitCost||parseFloat(s.rateLimitCost)===0)&&!await z("è´¹ç”¨é™åˆ¶æé†’",`æ‚¨è®¾ç½®äº†æ—¶é—´çª—å£ä½†è´¹ç”¨é™åˆ¶ä¸º0ï¼Œè¿™æ„å‘³ç€ä¸ä¼šæœ‰è´¹ç”¨é™åˆ¶ã€‚

æ˜¯å¦ç»§ç»­ï¼Ÿ`,"ç»§ç»­"+(v.value?"æ›´æ–°":"åˆ›å»º"),"è¿”å›žä¿®æ”¹","warning"))){L.value=!0;try{const r={};if(n.value)for(const[x,A]of Object.entries(s.serviceRates))A!=null&&A!==""&&(r[x]=A);const t={templateName:s.templateName,description:s.description||void 0,serviceRates:r,tokenLimit:0,rateLimitWindow:s.rateLimitWindow!==""&&s.rateLimitWindow!==null?parseInt(s.rateLimitWindow):null,rateLimitRequests:s.rateLimitRequests!==""&&s.rateLimitRequests!==null?parseInt(s.rateLimitRequests):null,rateLimitCost:s.rateLimitCost!==""&&s.rateLimitCost!==null?parseFloat(s.rateLimitCost):null,concurrencyLimit:s.concurrencyLimit!==""&&s.concurrencyLimit!==null?parseInt(s.concurrencyLimit):0,dailyCostLimit:s.dailyCostLimit!==""&&s.dailyCostLimit!==null?parseFloat(s.dailyCostLimit):0,totalCostLimit:s.totalCostLimit!==""&&s.totalCostLimit!==null?parseFloat(s.totalCostLimit):0,weeklyOpusCostLimit:s.weeklyOpusCostLimit!==""&&s.weeklyOpusCostLimit!==null?parseFloat(s.weeklyOpusCostLimit):0,expiresAt:s.expirationMode==="fixed"&&s.expiresAt||void 0,expireDuration:s.expirationMode==="fixed"&&s.expireDuration||void 0,customExpireDate:s.expirationMode==="fixed"&&s.customExpireDate||void 0,expirationMode:s.expirationMode,activationDays:s.expirationMode==="activation"?s.activationDays:void 0,activationUnit:s.expirationMode==="activation"?s.activationUnit:void 0,permissions:s.permissions,tags:s.tags.length>0?s.tags:void 0,enableModelRestriction:s.enableModelRestriction,restrictedModels:s.restrictedModels,enableClientRestriction:s.enableClientRestriction,allowedClients:s.allowedClients};s.claudeAccountId&&(s.claudeAccountId.startsWith("console:")?(t.claudeConsoleAccountId=s.claudeAccountId.substring(8),delete t.claudeAccountId):(t.claudeAccountId=s.claudeAccountId,delete t.claudeConsoleAccountId)),s.geminiAccountId&&(t.geminiAccountId=s.geminiAccountId),s.openaiAccountId&&(t.openaiAccountId=s.openaiAccountId),s.bedrockAccountId&&(t.bedrockAccountId=s.bedrockAccountId),s.droidAccountId&&(t.droidAccountId=s.droidAccountId);let a;v.value?a=await Oe(b.template.id,t):a=await Se(t),a.success?(w(`æ¨¡æ¿${v.value?"æ›´æ–°":"åˆ›å»º"}æˆåŠŸ`,"success"),T("success",a.data),T("close")):w(a.message||`${v.value?"æ›´æ–°":"åˆ›å»º"}å¤±è´¥`,"error")}catch{w(`${v.value?"æ›´æ–°":"åˆ›å»º"}å¤±è´¥`,"error")}finally{L.value=!1}}};return(r,t)=>(l(),ge(Ne,{to:"body"},[e("div",Qe,[e("div",Ye,[e("div",He,[e("div",Ze,[t[45]||(t[45]=e("div",{class:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 sm:h-10 sm:w-10 sm:rounded-xl"},[e("i",{class:"fas fa-file-invoice text-sm text-white sm:text-base"})],-1)),e("h3",Je,g(v.value?"ç¼–è¾‘æ¨¡æ¿":"åˆ›å»ºæ–°æ¨¡æ¿"),1)]),e("button",{class:"p-1 text-gray-400 transition-colors hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:t[0]||(t[0]=a=>r.$emit("close"))},t[46]||(t[46]=[e("i",{class:"fas fa-times text-lg sm:text-xl"},null,-1)]))]),e("form",{class:"modal-scroll-content custom-scrollbar flex-1 space-y-4",onSubmit:ie(Ge,["prevent"])},[e("div",null,[t[47]||(t[47]=e("label",{class:"mb-1.5 block text-xs font-semibold text-gray-700 dark:text-gray-300 sm:mb-2 sm:text-sm"},[f("æ¨¡æ¿åç§° "),e("span",{class:"text-red-500"},"*")],-1)),e("div",null,[p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.templateName=a),class:Ce(["form-input flex-1 border-gray-300 text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",{"border-red-500":V.value.templateName}]),placeholder:"ä¸ºæ‚¨çš„æ¨¡æ¿å–ä¸€ä¸ªåç§°",required:"",type:"text",onInput:t[2]||(t[2]=a=>V.value.templateName="")},null,34),[[C,s.templateName]])]),V.value.templateName?(l(),i("p",Xe,g(V.value.templateName),1)):k("",!0)]),e("div",null,[t[55]||(t[55]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700 dark:text-gray-300"},"æ ‡ç­¾",-1)),e("div",_e,[s.tags.length>0?(l(),i("div",et,[t[49]||(t[49]=e("div",{class:"mb-2 text-xs font-medium text-gray-600 dark:text-gray-400"}," å·²é€‰æ‹©çš„æ ‡ç­¾: ",-1)),e("div",tt,[(l(!0),i(K,null,G(s.tags,(a,x)=>(l(),i("span",{key:"selected-"+x,class:"inline-flex items-center gap-1 rounded-full bg-blue-100 px-3 py-1 text-sm text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"},[f(g(a)+" ",1),e("button",{class:"ml-1 hover:text-blue-900 dark:hover:text-blue-300",type:"button",onClick:A=>H(x)},t[48]||(t[48]=[e("i",{class:"fas fa-times text-xs"},null,-1)]),8,st)]))),128))])])):k("",!0),F.value.length>0?(l(),i("div",at,[t[51]||(t[51]=e("div",{class:"mb-2 text-xs font-medium text-gray-600 dark:text-gray-400"}," ç‚¹å‡»é€‰æ‹©å·²æœ‰æ ‡ç­¾: ",-1)),e("div",rt,[(l(!0),i(K,null,G(F.value,a=>(l(),i("button",{key:"available-"+a,class:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-3 py-1 text-sm text-gray-700 transition-colors hover:bg-blue-100 hover:text-blue-700 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-blue-900/30 dark:hover:text-blue-400",type:"button",onClick:x=>Y(a)},[t[50]||(t[50]=e("i",{class:"fas fa-tag text-xs text-gray-500 dark:text-gray-400"},null,-1)),f(" "+g(a),1)],8,ot))),128))])])):k("",!0),e("div",null,[t[53]||(t[53]=e("div",{class:"mb-2 text-xs font-medium text-gray-600 dark:text-gray-400"}," åˆ›å»ºæ–°æ ‡ç­¾: ",-1)),e("div",lt,[p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>R.value=a),class:"form-input flex-1 border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",placeholder:"è¾“å…¥æ–°æ ‡ç­¾åç§°",type:"text",onKeypress:me(ie(h,["prevent"]),["enter"])},null,40,it),[[C,R.value]]),e("button",{class:"rounded-lg bg-green-500 px-4 py-2 text-white transition-colors hover:bg-green-600",type:"button",onClick:h},t[52]||(t[52]=[e("i",{class:"fas fa-plus"},null,-1)]))])]),t[54]||(t[54]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," ç”¨äºŽæ ‡è®°ä¸åŒå›¢é˜Ÿæˆ–ç”¨é€”ï¼Œæ–¹ä¾¿ç­›é€‰ç®¡ç† ",-1))])]),e("div",nt,[t[63]||(t[63]=e("div",{class:"mb-2 flex items-center gap-2"},[e("div",{class:"flex h-6 w-6 flex-shrink-0 items-center justify-center rounded bg-blue-500"},[e("i",{class:"fas fa-tachometer-alt text-xs text-white"})]),e("h4",{class:"text-sm font-semibold text-gray-800 dark:text-gray-200"}," é€ŸçŽ‡é™åˆ¶è®¾ç½® (å¯é€‰) ")],-1)),e("div",dt,[e("div",ut,[e("div",null,[t[56]||(t[56]=e("label",{class:"mb-1 block text-xs font-medium text-gray-700 dark:text-gray-300"},"æ—¶é—´çª—å£ (åˆ†é’Ÿ)",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.rateLimitWindow=a),class:"form-input w-full border-gray-300 text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",min:"1",placeholder:"æ— é™åˆ¶",type:"number"},null,512),[[C,s.rateLimitWindow]]),t[57]||(t[57]=e("p",{class:"ml-2 mt-0.5 text-xs text-gray-500 dark:text-gray-400"},"æ—¶é—´æ®µå•ä½",-1))]),e("div",null,[t[58]||(t[58]=e("label",{class:"mb-1 block text-xs font-medium text-gray-700 dark:text-gray-300"},"è¯·æ±‚æ¬¡æ•°é™åˆ¶",-1)),p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.rateLimitRequests=a),class:"form-input w-full border-gray-300 text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",min:"1",placeholder:"æ— é™åˆ¶",type:"number"},null,512),[[C,s.rateLimitRequests]]),t[59]||(t[59]=e("p",{class:"ml-2 mt-0.5 text-xs text-gray-500 dark:text-gray-400"},"çª—å£å†…æœ€å¤§è¯·æ±‚",-1))]),e("div",null,[t[60]||(t[60]=e("label",{class:"mb-1 block text-xs font-medium text-gray-700 dark:text-gray-300"},"è´¹ç”¨é™åˆ¶ (ç¾Žå…ƒ)",-1)),p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>s.rateLimitCost=a),class:"form-input w-full border-gray-300 text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",min:"0",placeholder:"æ— é™åˆ¶",step:"0.01",type:"number"},null,512),[[C,s.rateLimitCost]]),t[61]||(t[61]=e("p",{class:"ml-2 mt-0.5 text-xs text-gray-500 dark:text-gray-400"},"çª—å£å†…æœ€å¤§è´¹ç”¨",-1))])]),t[62]||(t[62]=e("div",{class:"rounded-lg bg-blue-100 p-2 dark:bg-blue-900/30"},[e("h5",{class:"mb-1 text-xs font-semibold text-blue-800 dark:text-blue-400"}," ðŸ’¡ ä½¿ç”¨ç¤ºä¾‹ "),e("div",{class:"space-y-0.5 text-xs text-blue-700 dark:text-blue-300"},[e("div",null,[e("strong",null,"ç¤ºä¾‹1:"),f(" æ—¶é—´çª—å£=60ï¼Œè¯·æ±‚æ¬¡æ•°=1000 â†’ æ¯60åˆ†é’Ÿæœ€å¤š1000æ¬¡è¯·æ±‚ ")]),e("div",null,[e("strong",null,"ç¤ºä¾‹2:"),f(" æ—¶é—´çª—å£=1ï¼Œè´¹ç”¨=0.1 â†’ æ¯åˆ†é’Ÿæœ€å¤š$0.1è´¹ç”¨")]),e("div",null,[e("strong",null,"ç¤ºä¾‹3:"),f(" çª—å£=30ï¼Œè¯·æ±‚=50ï¼Œè´¹ç”¨=5 â†’ æ¯30åˆ†é’Ÿ50æ¬¡è¯·æ±‚ä¸”ä¸è¶…$5è´¹ç”¨ ")])])],-1))])]),e("div",null,[t[65]||(t[65]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700 dark:text-gray-300"},"æ¯æ—¥è´¹ç”¨é™åˆ¶ (ç¾Žå…ƒ)",-1)),e("div",pt,[e("div",ct,[e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[7]||(t[7]=a=>s.dailyCostLimit="50")}," $50 "),e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[8]||(t[8]=a=>s.dailyCostLimit="100")}," $100 "),e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[9]||(t[9]=a=>s.dailyCostLimit="200")}," $200 "),e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[10]||(t[10]=a=>s.dailyCostLimit="")}," è‡ªå®šä¹‰ ")]),p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>s.dailyCostLimit=a),class:"form-input w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",min:"0",placeholder:"0 è¡¨ç¤ºæ— é™åˆ¶",step:"0.01",type:"number"},null,512),[[C,s.dailyCostLimit]]),t[64]||(t[64]=e("p",{class:"dark:textç°-400 text-xs text-gray-500"}," è®¾ç½®æ­¤ API Key æ¯æ—¥çš„è´¹ç”¨é™åˆ¶ï¼Œè¶…è¿‡é™åˆ¶å°†æ‹’ç»è¯·æ±‚ï¼Œ0 æˆ–ç•™ç©ºè¡¨ç¤ºæ— é™åˆ¶ ",-1))])]),e("div",null,[t[67]||(t[67]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700 dark:text-gray-300"},"æ€»è´¹ç”¨é™åˆ¶ (ç¾Žå…ƒ)",-1)),e("div",gt,[e("div",mt,[e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[12]||(t[12]=a=>s.totalCostLimit="100")}," $100 "),e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[13]||(t[13]=a=>s.totalCostLimit="500")}," $500 "),e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[14]||(t[14]=a=>s.totalCostLimit="1000")}," $1000 "),e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[15]||(t[15]=a=>s.totalCostLimit="")}," è‡ªå®šä¹‰ ")]),p(e("input",{"onUpdate:modelValue":t[16]||(t[16]=a=>s.totalCostLimit=a),class:"form-input w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",min:"0",placeholder:"0 è¡¨ç¤ºæ— é™åˆ¶",step:"0.01",type:"number"},null,512),[[C,s.totalCostLimit]]),t[66]||(t[66]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," è®¾ç½®æ­¤ API Key çš„ç´¯è®¡æ€»è´¹ç”¨é™åˆ¶ï¼Œè¾¾åˆ°é™åˆ¶åŽå°†æ‹’ç»æ‰€æœ‰åŽç»­è¯·æ±‚ï¼Œ0 æˆ–ç•™ç©ºè¡¨ç¤ºæ— é™åˆ¶ ",-1))])]),e("div",null,[t[69]||(t[69]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700 dark:text-gray-300"},"Claude æ¨¡åž‹å‘¨è´¹ç”¨é™åˆ¶ (ç¾Žå…ƒ)",-1)),e("div",yt,[e("div",xt,[e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[17]||(t[17]=a=>s.weeklyOpusCostLimit="100")}," $100 "),e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[18]||(t[18]=a=>s.weeklyOpusCostLimit="500")}," $500 "),e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[19]||(t[19]=a=>s.weeklyOpusCostLimit="1000")}," $1000 "),e("button",{class:"rounded bg-gray-100 px-2 py-1 text-xs font-medium hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[20]||(t[20]=a=>s.weeklyOpusCostLimit="")}," è‡ªå®šä¹‰ ")]),p(e("input",{"onUpdate:modelValue":t[21]||(t[21]=a=>s.weeklyOpusCostLimit=a),class:"form-input w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",min:"0",placeholder:"0 è¡¨ç¤ºæ— é™åˆ¶",step:"0.01",type:"number"},null,512),[[C,s.weeklyOpusCostLimit]]),t[68]||(t[68]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," è®¾ç½® Claude æ¨¡åž‹çš„å‘¨è´¹ç”¨é™åˆ¶ï¼ˆå‘¨ä¸€åˆ°å‘¨æ—¥ï¼‰ï¼Œä»…å¯¹ Claude æ¨¡åž‹è¯·æ±‚ç”Ÿæ•ˆï¼Œ0 æˆ–ç•™ç©ºè¡¨ç¤ºæ— é™åˆ¶ ",-1))])]),e("div",null,[t[70]||(t[70]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700 dark:text-gray-300"},"å¹¶å‘é™åˆ¶ (å¯é€‰)",-1)),p(e("input",{"onUpdate:modelValue":t[22]||(t[22]=a=>s.concurrencyLimit=a),class:"form-input w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",min:"0",placeholder:"0 è¡¨ç¤ºæ— é™åˆ¶",type:"number"},null,512),[[C,s.concurrencyLimit]]),t[71]||(t[71]=e("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," è®¾ç½®æ­¤ API Key å¯åŒæ—¶å¤„ç†çš„æœ€å¤§è¯·æ±‚æ•°ï¼Œ0 æˆ–ç•™ç©ºè¡¨ç¤ºæ— é™åˆ¶ ",-1))]),e("div",null,[t[72]||(t[72]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700 dark:text-gray-300"},"å¤‡æ³¨ (å¯é€‰)",-1)),p(e("textarea",{"onUpdate:modelValue":t[23]||(t[23]=a=>s.description=a),class:"form-input w-full resize-none border-gray-300 text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",placeholder:"æè¿°æ­¤ API Key çš„ç”¨é€”...",rows:"2"},null,512),[[C,s.description]])]),e("div",bt,[e("div",ft,[e("div",kt,[p(e("input",{id:"enableServiceRates","onUpdate:modelValue":t[24]||(t[24]=a=>n.value=a),class:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-purple-600 focus:ring-purple-500",type:"checkbox"},null,512),[[U,n.value]]),t[73]||(t[73]=e("label",{class:"cursor-pointer text-sm font-semibold text-gray-700 dark:text-gray-300",for:"enableServiceRates"}," è‡ªå®šä¹‰æœåŠ¡å€çŽ‡ ",-1))]),t[74]||(t[74]=e("span",{class:"text-xs text-gray-500 dark:text-gray-400"}," ä¸Žå…¨å±€å€çŽ‡ç›¸ä¹˜ï¼Œç”¨äºŽ VIP æŠ˜æ‰£ç­‰ï¼ˆå¦‚å…¨å±€1.5 Ã— Keyå€çŽ‡0.8 = 1.2ï¼‰ ",-1))]),n.value?(l(),i("div",vt,[(l(),i(K,null,G(o,a=>e("div",{key:a.key,class:"flex items-center gap-2"},[e("span",Ct,g(a.label),1),p(e("input",{"onUpdate:modelValue":x=>s.serviceRates[a.key]=x,class:"form-input w-24 border-gray-300 text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",min:"0",placeholder:"1.0",step:"0.1",type:"number"},null,8,wt),[[C,s.serviceRates[a.key],void 0,{number:!0}]]),t[75]||(t[75]=e("span",{class:"text-xs text-gray-400"},"é»˜è®¤ 1.0",-1))])),64))])):k("",!0)]),e("div",null,[t[83]||(t[83]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700 dark:text-gray-300"},"è¿‡æœŸè®¾ç½®",-1)),e("div",At,[e("div",ht,[e("label",Lt,[p(e("input",{"onUpdate:modelValue":t[25]||(t[25]=a=>s.expirationMode=a),class:"mr-2 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",type:"radio",value:"fixed"},null,512),[[we,s.expirationMode]]),t[76]||(t[76]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"å›ºå®šæ—¶é—´è¿‡æœŸ",-1))]),e("label",Dt,[p(e("input",{"onUpdate:modelValue":t[26]||(t[26]=a=>s.expirationMode=a),class:"mr-2 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",type:"radio",value:"activation"},null,512),[[we,s.expirationMode]]),t[77]||(t[77]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"é¦–æ¬¡ä½¿ç”¨åŽæ¿€æ´»",-1))])]),e("p",It,[s.expirationMode==="fixed"?(l(),i("span",$t,t[78]||(t[78]=[e("i",{class:"fas fa-info-circle mr-1"},null,-1),f(" å›ºå®šæ—¶é—´æ¨¡å¼ï¼šKey åˆ›å»ºåŽç«‹å³ç”Ÿæ•ˆï¼ŒæŒ‰è®¾å®šæ—¶é—´è¿‡æœŸï¼ˆæ”¯æŒå°æ—¶å’Œå¤©æ•°ï¼‰ ",-1)]))):(l(),i("span",Mt,t[79]||(t[79]=[e("i",{class:"fas fa-info-circle mr-1"},null,-1),f(" æ¿€æ´»æ¨¡å¼ï¼šKey é¦–æ¬¡ä½¿ç”¨æ—¶æ¿€æ´»ï¼Œæ¿€æ´»åŽæŒ‰è®¾å®šæ—¶é—´è¿‡æœŸï¼ˆæ”¯æŒå°æ—¶å’Œå¤©æ•°ï¼Œé€‚åˆæ‰¹é‡é”€å”®ï¼‰ ",-1)])))])]),s.expirationMode==="fixed"?(l(),i("div",Vt,[p(e("select",{"onUpdate:modelValue":t[27]||(t[27]=a=>s.expireDuration=a),class:"form-input w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",onChange:j},t[80]||(t[80]=[e("option",{value:""},"æ°¸ä¸è¿‡æœŸ",-1),e("option",{value:"1h"},"1 å°æ—¶",-1),e("option",{value:"3h"},"3 å°æ—¶",-1),e("option",{value:"6h"},"6 å°æ—¶",-1),e("option",{value:"12h"},"12 å°æ—¶",-1),e("option",{value:"1d"},"1 å¤©",-1),e("option",{value:"7d"},"7 å¤©",-1),e("option",{value:"30d"},"30 å¤©",-1),e("option",{value:"90d"},"90 å¤©",-1),e("option",{value:"180d"},"180 å¤©",-1),e("option",{value:"365d"},"365 å¤©",-1),e("option",{value:"custom"},"è‡ªå®šä¹‰æ—¥æœŸ",-1)]),544),[[Ae,s.expireDuration]]),s.expireDuration==="custom"?(l(),i("div",Rt,[p(e("input",{"onUpdate:modelValue":t[28]||(t[28]=a=>s.customExpireDate=a),class:"form-input w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",min:ee.value,type:"datetime-local",onChange:te},null,40,Ut),[[C,s.customExpireDate]])])):k("",!0),s.expiresAt?(l(),i("p",Kt," å°†äºŽ "+g(se(s.expiresAt))+" è¿‡æœŸ ",1)):k("",!0)])):(l(),i("div",Gt,[e("div",Tt,[p(e("input",{"onUpdate:modelValue":t[29]||(t[29]=a=>s.activationDays=a),class:"form-input flex-1 border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",max:s.activationUnit==="hours"?8760:3650,min:"1",placeholder:s.activationUnit==="hours"?"è¾“å…¥å°æ—¶æ•°":"è¾“å…¥å¤©æ•°",type:"number"},null,8,Et),[[C,s.activationDays,void 0,{number:!0}]]),p(e("select",{"onUpdate:modelValue":t[30]||(t[30]=a=>s.activationUnit=a),class:"form-input w-20 border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",onChange:c},t[81]||(t[81]=[e("option",{value:"hours"},"å°æ—¶",-1),e("option",{value:"days"},"å¤©",-1)]),544),[[Ae,s.activationUnit]])]),e("div",Nt,[(l(!0),i(K,null,G(Z(),a=>(l(),i("button",{key:a.value,class:"rounded-md border border-gray-300 px-3 py-1 text-xs hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700",type:"button",onClick:x=>s.activationDays=a.value},g(a.label),9,Ot))),128))]),e("p",St,[t[82]||(t[82]=e("i",{class:"fas fa-clock mr-1"},null,-1)),f(" Key å°†åœ¨é¦–æ¬¡ä½¿ç”¨åŽæ¿€æ´»ï¼Œæ¿€æ´»åŽ "+g(s.activationDays||(s.activationUnit==="hours"?24:30))+" "+g(s.activationUnit==="hours"?"å°æ—¶":"å¤©")+"è¿‡æœŸ ",1)])]))]),e("div",null,[t[88]||(t[88]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700 dark:text-gray-300"},"æœåŠ¡æƒé™",-1)),e("div",Pt,[e("label",jt,[p(e("input",{"onUpdate:modelValue":t[31]||(t[31]=a=>s.permissions=a),class:"mr-2 rounded text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",type:"checkbox",value:"claude",onChange:d},null,544),[[U,s.permissions]]),t[84]||(t[84]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Claude",-1))]),e("label",qt,[p(e("input",{"onUpdate:modelValue":t[32]||(t[32]=a=>s.permissions=a),class:"mr-2 rounded text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",type:"checkbox",value:"gemini",onChange:d},null,544),[[U,s.permissions]]),t[85]||(t[85]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Gemini",-1))]),e("label",Wt,[p(e("input",{"onUpdate:modelValue":t[33]||(t[33]=a=>s.permissions=a),class:"mr-2 rounded text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",type:"checkbox",value:"openai",onChange:d},null,544),[[U,s.permissions]]),t[86]||(t[86]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"OpenAI",-1))]),e("label",zt,[p(e("input",{"onUpdate:modelValue":t[34]||(t[34]=a=>s.permissions=a),class:"mr-2 rounded text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",type:"checkbox",value:"droid",onChange:d},null,544),[[U,s.permissions]]),t[87]||(t[87]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Droid",-1))])]),t[89]||(t[89]=e("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," ä¸é€‰æ‹©ä»»ä½•æœåŠ¡è¡¨ç¤ºå…è®¸è®¿é—®å…¨éƒ¨æœåŠ¡ ",-1))]),e("div",null,[e("div",Ft,[t[90]||(t[90]=e("label",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"ä¸“å±žè´¦å·ç»‘å®š (å¯é€‰)",-1)),e("button",{class:"flex items-center gap-1 text-sm text-blue-600 transition-colors hover:text-blue-800 disabled:cursor-not-allowed disabled:opacity-50 dark:text-blue-400 dark:hover:text-blue-300",disabled:D.value,title:"åˆ·æ–°è´¦å·åˆ—è¡¨",type:"button",onClick:O},[e("i",{class:Ce(["fas",D.value?"fa-spinner fa-spin":"fa-sync-alt","text-xs"])},null,2),e("span",null,g(D.value?"åˆ·æ–°ä¸­...":"åˆ·æ–°è´¦å·"),1)],8,Bt)]),e("div",Qt,[e("div",null,[t[91]||(t[91]=e("label",{class:"mb-1 block text-sm font-medium text-gray-600 dark:text-gray-400"},"Claude ä¸“å±žè´¦å·",-1)),q(J,{modelValue:s.claudeAccountId,"onUpdate:modelValue":t[35]||(t[35]=a=>s.claudeAccountId=a),accounts:y.value.claude,"default-option-text":"ä½¿ç”¨å…±äº«è´¦å·æ± ",disabled:s.permissions.length>0&&!s.permissions.includes("claude"),groups:y.value.claudeGroups,placeholder:"è¯·é€‰æ‹©Claudeè´¦å·",platform:"claude"},null,8,["modelValue","accounts","disabled","groups"])]),e("div",null,[t[92]||(t[92]=e("label",{class:"mb-1 block text-sm font-medium text-gray-600 dark:text-gray-400"},"Gemini ä¸“å±žè´¦å·",-1)),q(J,{modelValue:s.geminiAccountId,"onUpdate:modelValue":t[36]||(t[36]=a=>s.geminiAccountId=a),accounts:y.value.gemini,"default-option-text":"ä½¿ç”¨å…±äº«è´¦å·æ± ",disabled:s.permissions.length>0&&!s.permissions.includes("gemini"),groups:y.value.geminiGroups,placeholder:"è¯·é€‰æ‹©Geminiè´¦å·",platform:"gemini"},null,8,["modelValue","accounts","disabled","groups"])]),e("div",null,[t[93]||(t[93]=e("label",{class:"mb-1 block text-sm font-medium text-gray-600 dark:text-gray-400"},"OpenAI ä¸“å±žè´¦å·",-1)),q(J,{modelValue:s.openaiAccountId,"onUpdate:modelValue":t[37]||(t[37]=a=>s.openaiAccountId=a),accounts:y.value.openai,"default-option-text":"ä½¿ç”¨å…±äº«è´¦å·æ± ",disabled:s.permissions.length>0&&!s.permissions.includes("openai"),groups:y.value.openaiGroups,placeholder:"è¯·é€‰æ‹©OpenAIè´¦å·",platform:"openai"},null,8,["modelValue","accounts","disabled","groups"])]),e("div",null,[t[94]||(t[94]=e("label",{class:"mb-1 block text-sm font-medium text-gray-600 dark:text-gray-400"},"Bedrock ä¸“å±žè´¦å·",-1)),q(J,{modelValue:s.bedrockAccountId,"onUpdate:modelValue":t[38]||(t[38]=a=>s.bedrockAccountId=a),accounts:y.value.bedrock,"default-option-text":"ä½¿ç”¨å…±äº«è´¦å·æ± ",disabled:s.permissions.length>0&&!s.permissions.includes("claude"),groups:[],placeholder:"è¯·é€‰æ‹©Bedrockè´¦å·",platform:"bedrock"},null,8,["modelValue","accounts","disabled"])]),e("div",null,[t[95]||(t[95]=e("label",{class:"mb-1 block text-sm font-medium text-gray-600 dark:text-gray-400"},"Droid ä¸“å±žè´¦å·",-1)),q(J,{modelValue:s.droidAccountId,"onUpdate:modelValue":t[39]||(t[39]=a=>s.droidAccountId=a),accounts:y.value.droid,"default-option-text":"ä½¿ç”¨å…±äº«è´¦å·æ± ",disabled:s.permissions.length>0&&!s.permissions.includes("droid"),groups:y.value.droidGroups,placeholder:"è¯·é€‰æ‹©Droidè´¦å·",platform:"droid"},null,8,["modelValue","accounts","disabled","groups"])])]),t[96]||(t[96]=e("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," é€‰æ‹©ä¸“å±žè´¦å·åŽï¼Œæ­¤API Keyå°†åªä½¿ç”¨è¯¥è´¦å·ï¼Œä¸é€‰æ‹©åˆ™ä½¿ç”¨å…±äº«è´¦å·æ±  ",-1))]),e("div",null,[e("div",Yt,[p(e("input",{id:"enableModelRestriction","onUpdate:modelValue":t[40]||(t[40]=a=>s.enableModelRestriction=a),class:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-blue-500",type:"checkbox"},null,512),[[U,s.enableModelRestriction]]),t[97]||(t[97]=e("label",{class:"ml-2 cursor-pointer text-sm font-semibold text-gray-700 dark:text-gray-300",for:"enableModelRestriction"}," å¯ç”¨æ¨¡åž‹é™åˆ¶ ",-1))]),s.enableModelRestriction?(l(),i("div",Ht,[e("div",null,[t[100]||(t[100]=e("label",{class:"mb-2 block text-sm font-medium text-gray-600"},"é™åˆ¶çš„æ¨¡åž‹åˆ—è¡¨",-1)),e("div",Zt,[(l(!0),i(K,null,G(s.restrictedModels,(a,x)=>(l(),i("span",{key:x,class:"inline-flex items-center rounded-full bg-red-100 px-3 py-1 text-sm text-red-800"},[f(g(a)+" ",1),e("button",{class:"ml-2 text-red-600 hover:text-red-800",type:"button",onClick:A=>ae(x)},t[98]||(t[98]=[e("i",{class:"fas fa-times text-xs"},null,-1)]),8,Jt)]))),128)),s.restrictedModels.length===0?(l(),i("span",Xt," æš‚æ— é™åˆ¶çš„æ¨¡åž‹ ")):k("",!0)]),e("div",_t,[e("div",es,[(l(!0),i(K,null,G(Q.value,a=>(l(),i("button",{key:a,class:"flex-shrink-0 rounded-lg bg-gray-100 px-3 py-1 text-xs text-gray-700 transition-colors hover:bg-gray-200 sm:text-sm",type:"button",onClick:x=>oe(a)},g(a),9,ts))),128)),Q.value.length===0?(l(),i("span",ss," æ‰€æœ‰å¸¸ç”¨æ¨¡åž‹å·²åœ¨é™åˆ¶åˆ—è¡¨ä¸­ ")):k("",!0)]),e("div",as,[p(e("input",{"onUpdate:modelValue":t[41]||(t[41]=a=>s.modelInput=a),class:"form-input flex-1",placeholder:"è¾“å…¥æ¨¡åž‹åç§°ï¼ŒæŒ‰å›žè½¦æ·»åŠ ",type:"text",onKeydown:me(ie(B,["prevent"]),["enter"])},null,40,rs),[[C,s.modelInput]]),e("button",{class:"rounded-lg bg-red-500 px-4 py-2 text-white transition-colors hover:bg-red-600",type:"button",onClick:B},t[99]||(t[99]=[e("i",{class:"fas fa-plus"},null,-1)]))])]),t[101]||(t[101]=e("p",{class:"mt-2 text-xs text-gray-500"}," è®¾ç½®æ­¤API Keyæ— æ³•è®¿é—®çš„æ¨¡åž‹ï¼Œä¾‹å¦‚ï¼šclaude-opus-4-20250514 ",-1))])])):k("",!0)]),e("div",null,[e("div",os,[p(e("input",{id:"enableClientRestriction","onUpdate:modelValue":t[42]||(t[42]=a=>s.enableClientRestriction=a),class:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-blue-500",type:"checkbox"},null,512),[[U,s.enableClientRestriction]]),t[102]||(t[102]=e("label",{class:"ml-2 cursor-pointer text-sm font-semibold text-gray-700 dark:text-gray-300",for:"enableClientRestriction"}," å¯ç”¨å®¢æˆ·ç«¯é™åˆ¶ ",-1))]),s.enableClientRestriction?(l(),i("div",ls,[e("div",null,[t[103]||(t[103]=e("label",{class:"mb-2 block text-xs font-medium text-gray-700 dark:text-gray-300"},"å…è®¸çš„å®¢æˆ·ç«¯",-1)),e("div",is,[(l(!0),i(K,null,G(_.value,a=>(l(),i("div",{key:a.id,class:"flex items-start"},[p(e("input",{id:`client_${a.id}`,"onUpdate:modelValue":t[43]||(t[43]=x=>s.allowedClients=x),class:"mt-0.5 h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-blue-500",type:"checkbox",value:a.id},null,8,ns),[[U,s.allowedClients]]),e("label",{class:"ml-2 flex-1 cursor-pointer",for:`client_${a.id}`},[e("span",us,g(a.name),1),e("span",ps,g(a.description),1)],8,ds)]))),128))])])])):k("",!0)]),e("div",cs,[e("button",{class:"flex-1 rounded-lg bg-gray-100 px-4 py-2.5 text-sm font-semibold text-gray-700 transition-colors hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",type:"button",onClick:t[44]||(t[44]=a=>r.$emit("close"))}," å–æ¶ˆ "),e("button",{class:"btn btn-primary flex-1 px-4 py-2.5 text-sm font-semibold",disabled:L.value,type:"submit"},[L.value?(l(),i("div",ms)):(l(),i("i",ys)),f(" "+g(L.value?v.value?"æ›´æ–°ä¸­...":"åˆ›å»ºä¸­...":v.value?"æ›´æ–°":"åˆ›å»º"),1)],8,gs)])],32)])]),q(Be,{"cancel-text":I.value.cancelText,"confirm-text":I.value.confirmText,message:I.value.message,show:N.value,title:I.value.title,type:I.value.type,onCancel:de,onConfirm:ne},null,8,["cancel-text","confirm-text","message","show","title","type"])]))}},bs={class:"min-h-screen bg-gray-50 p-6 dark:bg-gray-900"},fs={class:"mb-6"},ks={class:"mb-2 flex items-center gap-2"},vs={class:"mb-6 flex items-center justify-between"},Cs={class:"text-sm text-gray-600 dark:text-gray-400"},ws={key:0,class:"py-12 text-center"},As={key:1,class:"rounded-lg border-2 border-dashed border-gray-300 bg-white py-12 text-center dark:border-gray-700 dark:bg-gray-800"},hs={key:2,class:"grid gap-4 md:grid-cols-2 xl:grid-cols-3"},Ls={class:"mb-3 flex items-start justify-between"},Ds={class:"flex-1"},Is={class:"text-lg font-semibold text-gray-900 dark:text-white"},$s={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},Ms={class:"mb-4 flex flex-wrap gap-2"},Vs={key:0,class:"rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"},Rs={key:1,class:"rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800 dark:bg-green-900/30 dark:text-green-300"},Us={key:2,class:"rounded-full bg-purple-100 px-2.5 py-0.5 text-xs font-medium text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"},Ks={class:"flex gap-2"},Gs=["onClick"],Ts=["onClick"],Es=["onClick"],Ns={class:"mt-3 text-xs text-gray-500 dark:text-gray-400"},Os={class:"w-full max-w-md rounded-lg bg-white p-6 dark:bg-gray-800"},Ss={class:"mb-4 text-sm text-gray-600 dark:text-gray-400"},Ps={class:"font-semibold"},js={class:"mb-4"},qs={class:"flex justify-end gap-3"},Ws=["disabled"],Zs={__name:"ApiKeyTemplatesView",setup(ye){const P=m([]),b=m(!1),T=m(!1),E=m(!1),W=m(!1),L=m(null),D=m(null),v=m(""),N=m(null),I=m({claude:[],gemini:[],openai:[],bedrock:[],droid:[],claudeGroups:[],geminiGroups:[],openaiGroups:[],droidGroups:[]}),$=async()=>{var n,o,s,d,O,ee;try{const[j,te,se,B,ae,re,Q,oe,h]=await Promise.all([Le(),De(),Ie(),$e(),Me(),Ve(),Re(),Ue(),Ke()]),Y=[];j.success&&((n=j.data)==null||n.forEach(c=>{Y.push({...c,platform:"claude-oauth"})})),te.success&&((o=te.data)==null||o.forEach(c=>{Y.push({...c,platform:"claude-console"})}));const H=[];se.success&&((s=se.data)==null||s.forEach(c=>{H.push({...c,platform:"gemini"})})),B.success&&((d=B.data)==null||d.forEach(c=>{H.push({...c,platform:"gemini-api"})}));const Z=[];ae.success&&((O=ae.data)==null||O.forEach(c=>{Z.push({...c,platform:"openai"})})),re.success&&((ee=re.data)==null||ee.forEach(c=>{Z.push({...c,platform:"openai-responses"})})),I.value={claude:Y,gemini:H,openai:Z,bedrock:Q.success?Q.data||[]:[],droid:oe.success?(oe.data||[]).map(c=>({...c,platform:"droid"})):[],claudeGroups:h.success?(h.data||[]).filter(c=>c.platform==="claude"):[],geminiGroups:h.success?(h.data||[]).filter(c=>c.platform==="gemini"):[],openaiGroups:h.success?(h.data||[]).filter(c=>c.platform==="openai"):[],droidGroups:h.success?(h.data||[]).filter(c=>c.platform==="droid"):[]}}catch(j){console.error("åŠ è½½è´¦å·æ•°æ®å¤±è´¥:",j)}},z=async()=>{b.value=!0;try{const n=await Pe();n.success?P.value=n.data||[]:w("åŠ è½½æ¨¡æ¿å¤±è´¥","error")}catch(n){console.error("åŠ è½½æ¨¡æ¿å¤±è´¥:",n),w("åŠ è½½æ¨¡æ¿å¤±è´¥","error")}finally{b.value=!1}},ne=()=>{L.value=null,T.value=!0},de=n=>{L.value=n,T.value=!0},y=()=>{T.value=!1,L.value=null},V=()=>{z()},R=async n=>{if(confirm(`ç¡®å®šè¦åˆ é™¤æ¨¡æ¿"${n.templateName}"å—ï¼Ÿ`))try{const o=await qe(n.id);o.success?(w("æ¨¡æ¿åˆ é™¤æˆåŠŸ","success"),await z()):w(o.message||"åˆ é™¤å¤±è´¥","error")}catch(o){console.error("åˆ é™¤æ¨¡æ¿å¤±è´¥:",o),w("åˆ é™¤æ¨¡æ¿å¤±è´¥","error")}},X=n=>{D.value=n,v.value="",E.value=!0},F=async()=>{if(!v.value.trim()){w("è¯·è¾“å…¥ Key åç§°","error");return}try{const n=await je(D.value.id,{name:v.value.trim()});n.success?(w(`API Key "${v.value}" åˆ›å»ºæˆåŠŸ`,"success"),E.value=!1,N.value=n.data,W.value=!0):w(n.message||"åˆ›å»ºå¤±è´¥","error")}catch(n){console.error("åˆ›å»ºKeyå¤±è´¥:",n),w("åˆ›å»ºKeyå¤±è´¥","error")}},_=n=>n?new Date(n).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return he(async()=>{await $(),await z()}),(n,o)=>{var s;return l(),i("div",bs,[e("div",fs,[e("div",ks,[e("button",{class:"flex items-center gap-1 rounded-lg px-3 py-1.5 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200",onClick:o[0]||(o[0]=d=>n.$router.push("/api-keys"))},o[5]||(o[5]=[e("i",{class:"fas fa-arrow-left"},null,-1),e("span",null,"è¿”å›ž API Keys",-1)]))]),o[6]||(o[6]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},[e("i",{class:"fas fa-file-invoice mr-2 text-blue-600"}),f(" API Key æ¨¡æ¿ç®¡ç† ")],-1)),o[7]||(o[7]=e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," åˆ›å»ºå’Œç®¡ç† API Key æ¨¡æ¿ï¼Œå¿«é€Ÿç”Ÿæˆé…ç½®ç›¸åŒçš„å¯†é’¥ ",-1))]),e("div",vs,[e("div",Cs,"å…± "+g(P.value.length)+" ä¸ªæ¨¡æ¿",1),e("button",{class:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",onClick:ne},o[8]||(o[8]=[e("i",{class:"fas fa-plus mr-2"},null,-1),f(" åˆ›å»ºæ¨¡æ¿ ",-1)]))]),b.value?(l(),i("div",ws,o[9]||(o[9]=[e("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"},null,-1),e("p",{class:"mt-4 text-gray-500 dark:text-gray-400"},"æ­£åœ¨åŠ è½½...",-1)]))):P.value.length===0?(l(),i("div",As,o[10]||(o[10]=[e("i",{class:"fas fa-file-invoice fa-3x text-gray-300 dark:text-gray-600"},null,-1),e("p",{class:"mt-4 text-lg text-gray-500 dark:text-gray-400"},"æš‚æ— æ¨¡æ¿",-1),e("p",{class:"mt-2 text-sm text-gray-400"},'ç‚¹å‡»"åˆ›å»ºæ¨¡æ¿"æŒ‰é’®æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ªæ¨¡æ¿',-1)]))):(l(),i("div",hs,[(l(!0),i(K,null,G(P.value,d=>(l(),i("div",{key:d.id,class:"rounded-lg border border-gray-200 bg-white p-5 shadow-sm transition-shadow hover:shadow-md dark:border-gray-700 dark:bg-gray-800"},[e("div",Ls,[e("div",Ds,[e("h3",Is,g(d.templateName),1),d.description?(l(),i("p",$s,g(d.description),1)):k("",!0)])]),e("div",Ms,[d.dailyLimit?(l(),i("span",Vs,[o[11]||(o[11]=e("i",{class:"fas fa-calendar-day mr-1"},null,-1)),f(" æ¯æ—¥ "+g(d.dailyLimit),1)])):k("",!0),d.concurrentLimit?(l(),i("span",Rs,[o[12]||(o[12]=e("i",{class:"fas fa-layer-group mr-1"},null,-1)),f(" å¹¶å‘ "+g(d.concurrentLimit),1)])):k("",!0),d.permissions&&d.permissions.length>0?(l(),i("span",Us,[o[13]||(o[13]=e("i",{class:"fas fa-shield-alt mr-1"},null,-1)),f(" "+g(d.permissions.join(", ")),1)])):k("",!0)]),e("div",Ks,[e("button",{class:"flex-1 rounded-lg bg-green-600 px-3 py-2 text-sm font-medium text-white transition-colors hover:bg-green-700",onClick:O=>X(d)},o[14]||(o[14]=[e("i",{class:"fas fa-magic mr-1"},null,-1),f(" åˆ›å»º Key ",-1)]),8,Gs),e("button",{class:"rounded-lg bg-gray-200 px-3 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",onClick:O=>de(d)},o[15]||(o[15]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Ts),e("button",{class:"rounded-lg bg-red-100 px-3 py-2 text-sm font-medium text-red-700 transition-colors hover:bg-red-200 dark:bg-red-900/30 dark:text-red-400 dark:hover:bg-red-900/50",onClick:O=>R(d)},o[16]||(o[16]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Es)]),e("div",Ns," åˆ›å»ºäºŽ "+g(_(d.createdAt)),1)]))),128))])),T.value?(l(),ge(xs,{key:3,accounts:I.value,template:L.value,onClose:y,onSuccess:V},null,8,["accounts","template"])):k("",!0),E.value?(l(),i("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:o[3]||(o[3]=ie(d=>E.value=!1,["self"]))},[e("div",Os,[o[19]||(o[19]=e("h2",{class:"mb-4 text-xl font-bold text-gray-900 dark:text-white"},"ä»Žæ¨¡æ¿åˆ›å»º API Key",-1)),e("p",Ss,[o[17]||(o[17]=f(" æ¨¡æ¿ï¼š",-1)),e("span",Ps,g((s=D.value)==null?void 0:s.templateName),1)]),e("div",js,[o[18]||(o[18]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Key åç§° * ",-1)),p(e("input",{"onUpdate:modelValue":o[1]||(o[1]=d=>v.value=d),class:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"è¾“å…¥ Key åç§°",type:"text",onKeyup:me(F,["enter"])},null,544),[[C,v.value]])]),e("div",qs,[e("button",{class:"rounded-lg bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",onClick:o[2]||(o[2]=d=>E.value=!1)}," å–æ¶ˆ "),e("button",{class:"rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-green-700 disabled:cursor-not-allowed disabled:opacity-50",disabled:!v.value.trim(),onClick:F}," åˆ›å»º ",8,Ws)])])])):k("",!0),W.value?(l(),ge(Fe,{key:5,"api-key":N.value,onClose:o[4]||(o[4]=d=>W.value=!1)},null,8,["api-key"])):k("",!0)])}}};export{Zs as default};
